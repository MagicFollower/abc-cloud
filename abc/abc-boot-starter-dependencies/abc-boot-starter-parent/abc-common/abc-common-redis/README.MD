### abc-common-redisç»„ä»¶æ–‡æ¡£

---

#### ğŸš€ç‰ˆæœ¬ï¼š0.0.1-SNAPSHOT

- ä½¿ç”¨`fastjson2`ä½œä¸ºRedisçš„åºåˆ—åŒ–ã€ååºåˆ—åŒ–å™¨
- æ³¨å…¥`RedisService`è‡³IOCå®¹å™¨ï¼ˆ`å°è£…RedisTmplate` ï¼‰
  - `RedisService`ä¸­çš„APIè¿”å›å€¼ä¸º`æœªåŒ…è£…åŸºæœ¬ç±»å‹` 
- `RedisService`æä¾›çš„æ¥å£æ¸…å•å¦‚ä¸‹ï¼š

```conf
void setCacheObject(final String key, final T value)
void setCacheObject(final String key, final T value, final Long timeout, final TimeUnit timeUnit)
long setCacheList(final String key, final List<T> dataList)
BoundSetOperations<String, T> setCacheSet(final String key, final Set<T> dataSet)
void setCacheMap(final String key, final Map<String, T> dataMap)
â•void setCacheMapValue(final String key, final String hKey, final T value)
â¬‡ï¸
boolean expire(final String key, final long timeoutSeconds)
boolean expire(final String key, final long timeout, final TimeUnit unit)
long getExpire(final String key)
```

```conf
boolean hasKey(String key)
â¬‡ï¸
T getCacheObject(final String key)
List<T> getCacheList(final String key)
Set<T> getCacheSet(final String key)
Map<String, T> getCacheMap(final String key)
â•T getCacheMapValue(final String key, final String hKey)
â•List<T> getMultiCacheMapValue(final String key, final Collection<Object> hKeys)
â¬‡ï¸
Collection<String> keys(final String pattern)
```

```conf
boolean deleteObject(final String key)
boolean deleteObject(final Collection collection)
â•boolean deleteCacheMapValue(final String key, final String hKey)
```

- ä½¿ç”¨è¯¥ç»„ä»¶ï¼Œä½ åº”è¯¥çŸ¥é“å¦‚ä½•ä½¿ç”¨`SpringRedis`çš„åŸºæœ¬é…ç½®
  - å•æœº
  - å“¨å…µ
  - ~~é›†ç¾¤ï¼ˆä¸æ¨èï¼‰~~

```yaml
spring:
  redis:
    database: 1
    host: 192.168.204.123
    # password: <your-redis-password>
    port: 30379
    timeout: 5000
```

```yaml
spring:
  redis:
    timeout: 5000
    # sentinelå“¨å…µé…ç½®: https://www.yuque.com/u22384616/aeg3ox/llz54w
    sentinel:
      master: mymaster
      nodes: 127.0.0.1:26379,127.0.0.1:26380,127.0.0.1:26381
```

- å…³äºRedisçš„è¿æ¥æ± 

  - spring-boot-starter-data-redis:2.7.11ä½¿ç”¨çš„lettuceè¿æ¥æ± 

    ```yaml
    spring:
      redis:
        host: localhost
        port: 6379
        password: password
        timeout: 3000
        lettuce:
          pool:
            min-idle: 10
            max-idle: 20
            max-active: 30
    ```

  - redisson-spring-boot-starter:3.18.0ä½¿ç”¨çš„æ˜¯è‡ªå®šä¹‰çš„è¿æ¥æ± ï¼ˆ***â†ªï¸é»˜è®¤ä¼šå¼•å…¥spring-boot-starter-data-redisï¼Œä½†æ˜¯â¤µï¸***ï¼‰

    - â˜€ï¸`redisson-spring-boot-starter`ä¼šå¼•å…¥`spring-boot-starter-data-redis`ï¼Œ***ä½†æ˜¯ç§»é™¤äº†å…¶ä¸­lettuceã€‚***

    - [redisson/redisson-spring-boot-starter at master Â· redisson/redisson (github.com)](https://github.com/redisson/redisson/tree/master/redisson-spring-boot-starter#spring-boot-starter)

    - æ³¨æ„ï¼šä¸¤ç§æ¥å£ï¼Œä¸¤ç§é…ç½®ï¼Œä½†æ˜¯åªæœ‰ä¸€ç§é…ç½®ä¼šç”Ÿæ•ˆï¼ˆé…ç½®ä¹‹é—´å­˜åœ¨ä¼˜å…ˆçº§ï¼‰
    
      - ![redisson-spring-boot-starteré…ç½®ä¼˜å…ˆçº§.png](https://github.com/MagicFollower/abc-cloud/blob/main/abc/abc-boot-starter-dependencies/abc-boot-starter-parent/abc-common/img/common-redis/redisson-spring-boot-starter%E9%85%8D%E7%BD%AE%E4%BC%98%E5%85%88%E7%BA%A7.png?raw=true)
      
      - ```xml
        <dependency>
            <groupId>org.redisson</groupId>
            <artifactId>redisson-spring-boot-starter</artifactId>
            <version>3.18.0</version>
        </dependency>
        <!-- codeCç¼–è§£ç å™¨ï¼Œæ•ˆç‡è¾ƒé«˜ï¼Œå¯æ›¿æ¢ä¸ºjscksonï¼Œå‚è€ƒä¸‹æ–¹å‚æ•°è§£æ -->
        <dependency>
            <groupId>com.esotericsoftware</groupId>
            <artifactId>kryo</artifactId>
            <version>5.5.0</version>
        </dependency>
        ```
      
      ```yaml
      spring:
        redis:
         redisson: 
           config: |
              clusterServersConfig:
                password: null
                connectTimeout: 3000
                timeout: 3000
                idleConnectionTimeout: 10000
                retryAttempts: 2
                retryInterval: 1000
                failedSlaveReconnectionInterval: 3000
                failedSlaveCheckInterval: 60000
                clientName: null
                loadBalancer: !<org.redisson.connection.balancer.RoundRobinLoadBalancer> {}
                subscriptionsPerConnection: 5
                subscriptionConnectionMinimumIdleSize: 1
                subscriptionConnectionPoolSize: 50
                slaveConnectionMinimumIdleSize: 24
                slaveConnectionPoolSize: 64
                masterConnectionMinimumIdleSize: 24
                masterConnectionPoolSize: 64
                readMode: "SLAVE"
                subscriptionMode: "SLAVE"
                nodeAddresses:
                - "redis://127.0.0.1:7004"
                - "redis://127.0.0.1:7001"
                - "redis://127.0.0.1:7000"
                masterName: "master"
                database: 0	
                scanInterval: 1000
                pingConnectionInterval: 0
                keepAlive: false
                tcpNoDelay: false
              threads: 4
              nettyThreads: 4
              codec: !<org.redisson.codec.Kryo5Codec> {}
              transportMode: "NIO"
      ```
      
      - å“¨å…µé…ç½®

        - ```yaml
          spring:
            application:
              name: abc-fastlink-business-portal
            main:
              banner-mode: off
            redis:
              redisson:
                file: classpath:redisson.yaml
          ```
      
        - ```yaml
          sentinelServersConfig:
            idleConnectionTimeout: 10000
            connectTimeout: 3000
            timeout: 3000
            retryAttempts: 2
            retryInterval: 1000
            failedSlaveReconnectionInterval: 3000
            failedSlaveCheckInterval: 60000
            password: null
            clientName: null
            loadBalancer: !<org.redisson.connection.balancer.RoundRobinLoadBalancer> {}
            subscriptionsPerConnection: 5
            subscriptionConnectionMinimumIdleSize: 1
            subscriptionConnectionPoolSize: 50
            slaveConnectionMinimumIdleSize: 24
            slaveConnectionPoolSize: 64
            masterConnectionMinimumIdleSize: 24
            masterConnectionPoolSize: 64
            readMode: "SLAVE"
            subscriptionMode: "SLAVE"
            sentinelAddresses:
              - "redis://192.168.204.101:26379"
              - "redis://192.168.204.101:26380"
              - "redis://192.168.204.101:26381"
            masterName: "master"
            database: 15
          threads: 4
          nettyThreads: 4
          codec: !<org.redisson.codec.Kryo5Codec> {}
          transportMode: "NIO"
          ```
      
        - ```yaml
          spring:
            application:
              name: abc-fastlink-business-portal
            main:
              banner-mode: off
            redis:
              redisson:
                #file: classpath:redisson.yaml
                config: |
                  sentinelServersConfig:
                    idleConnectionTimeout: 10000
                    connectTimeout: 3000
                    timeout: 3000
                    retryAttempts: 2
                    retryInterval: 1000
                    failedSlaveReconnectionInterval: 3000
                    failedSlaveCheckInterval: 60000
                    password: null
                    clientName: null
                    loadBalancer: !<org.redisson.connection.balancer.RoundRobinLoadBalancer> {}
                    subscriptionsPerConnection: 5
                    subscriptionConnectionMinimumIdleSize: 1
                    subscriptionConnectionPoolSize: 50
                    slaveConnectionMinimumIdleSize: 24
                    slaveConnectionPoolSize: 64
                    masterConnectionMinimumIdleSize: 24
                    masterConnectionPoolSize: 64
                    readMode: "SLAVE"
                    subscriptionMode: "SLAVE"
                    sentinelAddresses:
                      - "redis://192.168.204.101:26379"
                      - "redis://192.168.204.101:26380"
                      - "redis://192.168.204.101:26381"
                    masterName: "master"
                    database: 15
                  threads: 4
                  nettyThreads: 4
                  codec: !<org.redisson.codec.Kryo5Codec> {}
                  transportMode: "NIO"
          ```
      
      -  å•æœºæ¨¡å¼
      
        - ```yaml
          singleServerConfig:
            idleConnectionTimeout: 10000
            connectTimeout: 10000
            timeout: 3000
            retryAttempts: 3
            retryInterval: 1500
            password: null
            subscriptionsPerConnection: 5
            clientName: null
            address: "redis://127.0.0.1:6379"
            subscriptionConnectionMinimumIdleSize: 1
            subscriptionConnectionPoolSize: 50
            connectionMinimumIdleSize: 24
            connectionPoolSize: 64
            database: 0
            dnsMonitoringInterval: 5000
          threads: 16
          nettyThreads: 32
          codec: !<org.redisson.codec.Kryo5Codec> {}
          transportMode: "NIO"
          ```
      
      - ***é…ç½®è§£æ***â¤µï¸
      
      - redissoné…ç½®ä¸­idleConnectionTimeoutã€connectTimeoutã€timeoutåˆ†åˆ«è¡¨ç¤ºä»€ä¹ˆï¼Ÿ
      
        - åœ¨Redissonçš„é…ç½®ä¸­ï¼Œ`idleConnectionTimeout`ã€`connectTimeout`ã€`timeout`ä¸‰ä¸ªå‚æ•°åˆ†åˆ«è¡¨ç¤ºï¼š
      
          - `idleConnectionTimeout`ï¼šç©ºé—²è¿æ¥è¶…æ—¶æ—¶é—´ï¼Œå½“è¿æ¥æ± ä¸­çš„è¿æ¥ç©ºé—²æ—¶é—´è¶…è¿‡è¯¥å€¼æ—¶ï¼Œè¿æ¥ä¼šè¢«è‡ªåŠ¨å…³é—­ã€‚é»˜è®¤å€¼æ˜¯30ç§’ã€‚
          - `connectTimeout`ï¼šè¿æ¥è¶…æ—¶æ—¶é—´ï¼Œå½“è¿æ¥å»ºç«‹è¶…è¿‡è¯¥æ—¶é—´æ—¶ï¼Œä¼šæŠ›å‡ºå¼‚å¸¸ã€‚é»˜è®¤å€¼æ˜¯10000æ¯«ç§’ã€‚
          - `timeout`ï¼šå‘½ä»¤æ‰§è¡Œè¶…æ—¶æ—¶é—´ï¼Œå½“å‘½ä»¤æ‰§è¡Œæ—¶é—´è¶…è¿‡è¯¥å€¼æ—¶ï¼Œä¼šæŠ›å‡ºå¼‚å¸¸ã€‚é»˜è®¤å€¼æ˜¯3000æ¯«ç§’ã€‚
      
          è¿™ä¸‰ä¸ªå‚æ•°éƒ½æ˜¯å…³äºRedisè¿æ¥çš„è¶…æ—¶æ—¶é—´è®¾ç½®ï¼Œä½†æ˜¯å®ƒä»¬ä¹‹é—´æœ‰ä¸€äº›å·®å¼‚ï¼š
      
          - `idleConnectionTimeout`æ˜¯å…³äºè¿æ¥ç©ºé—²æ—¶é—´çš„è¶…æ—¶è®¾ç½®ï¼Œå³è¿æ¥åœ¨ç©ºé—²ä¸€æ®µæ—¶é—´åä¼šè¢«è‡ªåŠ¨å…³é—­ï¼Œä¸»è¦å½±å“è¿æ¥æ± çš„æ€§èƒ½ã€‚
          - `connectTimeout`æ˜¯è¿æ¥å»ºç«‹çš„è¶…æ—¶æ—¶é—´è®¾ç½®ï¼Œå³è¿æ¥åœ¨å»ºç«‹ä¸€æ®µæ—¶é—´åå¦‚æœæ²¡æœ‰å»ºç«‹æˆåŠŸå°±ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚
          - `timeout`æ˜¯å‘½ä»¤æ‰§è¡Œçš„è¶…æ—¶æ—¶é—´è®¾ç½®ï¼Œå³å‘½ä»¤æ‰§è¡Œåœ¨ä¸€å®šæ—¶é—´å†…æ²¡æœ‰å“åº”å°±ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚
      
          éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™ä¸‰ä¸ªå‚æ•°éƒ½æ˜¯å¯ä»¥æ ¹æ®å®é™…æƒ…å†µè¿›è¡Œè°ƒæ•´çš„ï¼Œä½†æ˜¯éœ€è¦æ ¹æ®å®é™…æƒ…å†µè¿›è¡Œåˆç†çš„è®¾ç½®ï¼Œä»¥ç¡®ä¿Redisè¿æ¥çš„ç¨³å®šæ€§å’Œæ€§èƒ½ã€‚
      
      - redissoné…ç½®ä¸­retryAttemptsã€retryIntervalã€failedSlaveReconnectionIntervalã€failedSlaveCheckIntervalåˆ†åˆ«è¡¨ç¤ºä»€ä¹ˆï¼Ÿ
      
        - åœ¨Redissonçš„é…ç½®ä¸­ï¼Œ`retryAttempts`ã€`retryInterval`ã€`failedSlaveReconnectionInterval`ã€`failedSlaveCheckInterval`å››ä¸ªå‚æ•°åˆ†åˆ«è¡¨ç¤ºï¼š
      
          - `retryAttempts`ï¼šRediså‘½ä»¤é‡è¯•æ¬¡æ•°ï¼Œå½“Rediså‘½ä»¤æ‰§è¡Œå¤±è´¥æ—¶ï¼Œä¼šè‡ªåŠ¨é‡è¯•è¯¥å‘½ä»¤çš„æ¬¡æ•°ã€‚é»˜è®¤å€¼æ˜¯3æ¬¡ã€‚
          - `retryInterval`ï¼šRediså‘½ä»¤é‡è¯•é—´éš”æ—¶é—´ï¼Œå½“Rediså‘½ä»¤æ‰§è¡Œå¤±è´¥åï¼Œé‡è¯•è¯¥å‘½ä»¤çš„æ—¶é—´é—´éš”ã€‚é»˜è®¤å€¼æ˜¯1500æ¯«ç§’ã€‚
          - `failedSlaveReconnectionInterval`ï¼šä»èŠ‚ç‚¹è¿æ¥å¤±è´¥é‡è¯•é—´éš”æ—¶é—´ï¼Œå½“Redisä»èŠ‚ç‚¹è¿æ¥å¤±è´¥æ—¶ï¼Œé‡è¯•è¿æ¥çš„æ—¶é—´é—´éš”ã€‚é»˜è®¤å€¼æ˜¯3000æ¯«ç§’ã€‚
          - `failedSlaveCheckInterval`ï¼šä»èŠ‚ç‚¹è¿æ¥æ£€æŸ¥é—´éš”æ—¶é—´ï¼ŒRedissonä¼šå®šæœŸæ£€æŸ¥ä»èŠ‚ç‚¹çš„è¿æ¥æ˜¯å¦æ­£å¸¸ã€‚é»˜è®¤å€¼æ˜¯60000æ¯«ç§’ã€‚
      
          è¿™å››ä¸ªå‚æ•°éƒ½æ˜¯å…³äºRedisè¿æ¥çš„é‡è¯•å’Œä»èŠ‚ç‚¹æ•…éšœæ¢å¤çš„è®¾ç½®ï¼Œä½†æ˜¯å®ƒä»¬ä¹‹é—´æœ‰ä¸€äº›å·®å¼‚ï¼š
      
          - `retryAttempts`å’Œ`retryInterval`ä¸»è¦å…³æ³¨Rediså‘½ä»¤æ‰§è¡Œçš„é‡è¯•è®¾ç½®ï¼Œå³å½“Rediså‘½ä»¤æ‰§è¡Œå¤±è´¥æ—¶ï¼Œä¼šè‡ªåŠ¨é‡è¯•è¯¥å‘½ä»¤çš„æ¬¡æ•°å’Œæ—¶é—´é—´éš”ã€‚
          - `failedSlaveReconnectionInterval`å’Œ`failedSlaveCheckInterval`ä¸»è¦å…³æ³¨Redisä»èŠ‚ç‚¹çš„æ•…éšœæ¢å¤è®¾ç½®ï¼Œå³å½“Redisä»èŠ‚ç‚¹è¿æ¥å¤±è´¥æ—¶ï¼Œé‡è¯•è¿æ¥çš„æ—¶é—´é—´éš”å’ŒRedissonæ£€æŸ¥ä»èŠ‚ç‚¹è¿æ¥æ˜¯å¦æ­£å¸¸çš„æ—¶é—´é—´éš”ã€‚
      
          éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™å››ä¸ªå‚æ•°éƒ½æ˜¯å¯ä»¥æ ¹æ®å®é™…æƒ…å†µè¿›è¡Œè°ƒæ•´çš„ï¼Œä½†æ˜¯éœ€è¦æ ¹æ®å®é™…æƒ…å†µè¿›è¡Œåˆç†çš„è®¾ç½®ï¼Œä»¥ç¡®ä¿Redisè¿æ¥çš„ç¨³å®šæ€§å’Œæ€§èƒ½ã€‚
      
      - redissoné…ç½®ä¸­clientNameã€loadBalanceråˆ†åˆ«è¡¨ç¤ºä»€ä¹ˆï¼Ÿ
      
        - åœ¨Redissonçš„é…ç½®ä¸­ï¼Œ`clientName`å’Œ`loadBalancer`ä¸¤ä¸ªå‚æ•°åˆ†åˆ«è¡¨ç¤ºï¼š
      
          - `clientName`ï¼šRediså®¢æˆ·ç«¯åç§°ï¼Œç”¨äºæ ‡è¯†Redissonå®¢æˆ·ç«¯ã€‚é»˜è®¤å€¼æ˜¯"redisson"ã€‚
          - `loadBalancer`ï¼šRedisé›†ç¾¤è´Ÿè½½å‡è¡¡ç®—æ³•ï¼Œç”¨äºåœ¨Redisé›†ç¾¤ä¸­é€‰æ‹©ä¸€ä¸ªèŠ‚ç‚¹è¿›è¡Œæ“ä½œã€‚é»˜è®¤å€¼æ˜¯"org.redisson.connection.balancer.RoundRobinLoadBalancer"ï¼Œå³è½®è¯¢ç®—æ³•ã€‚
      
          è¿™ä¸¤ä¸ªå‚æ•°éƒ½æ˜¯å…³äºRedisè¿æ¥çš„è®¾ç½®ï¼Œä½†æ˜¯å®ƒä»¬ä¹‹é—´æœ‰ä¸€äº›å·®å¼‚ï¼š
      
          - `clientName`ä¸»è¦ç”¨äºæ ‡è¯†Redissonå®¢æˆ·ç«¯ï¼Œå¯ä»¥æ ¹æ®å®é™…æƒ…å†µè¿›è¡Œè®¾ç½®ï¼Œä»¥ä¾¿åœ¨Redisä¸­è¿›è¡Œç›‘æ§å’Œç®¡ç†ã€‚
          - `loadBalancer`ä¸»è¦ç”¨äºåœ¨Redisé›†ç¾¤ä¸­é€‰æ‹©ä¸€ä¸ªèŠ‚ç‚¹è¿›è¡Œæ“ä½œï¼Œå¯ä»¥æ ¹æ®å®é™…æƒ…å†µè¿›è¡Œé€‰æ‹©ä¸åŒçš„è´Ÿè½½å‡è¡¡ç®—æ³•ã€‚
      
          éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ`loadBalancer`å‚æ•°å¯ä»¥æ ¹æ®å®é™…æƒ…å†µè¿›è¡Œè°ƒæ•´ï¼Œä»¥ä¾¿é€‰æ‹©æœ€é€‚åˆè‡ªå·±çš„è´Ÿè½½å‡è¡¡ç®—æ³•ã€‚å¦å¤–ï¼Œéœ€è¦ç¡®ä¿æ‰€é€‰æ‹©çš„è´Ÿè½½å‡è¡¡ç®—æ³•èƒ½å¤Ÿä¿è¯Redisé›†ç¾¤çš„ç¨³å®šæ€§å’Œæ€§èƒ½ã€‚
      
      - redissoné…ç½®ä¸­subscriptionsPerConnectionã€subscriptionConnectionMinimumIdleSizeã€subscriptionConnectionPoolSizeåˆ†åˆ«è¡¨ç¤ºä»€ä¹ˆï¼Ÿ
      
        - åœ¨Redissonçš„é…ç½®ä¸­ï¼Œ`subscriptionsPerConnection`ã€`subscriptionConnectionMinimumIdleSize`ã€`subscriptionConnectionPoolSize`ä¸‰ä¸ªå‚æ•°åˆ†åˆ«è¡¨ç¤ºï¼š
      
          - `subscriptionsPerConnection`ï¼šæ¯ä¸ªè¿æ¥çš„æœ€å¤§è®¢é˜…æ•°é‡ï¼Œå³æ¯ä¸ªRedisè¿æ¥æœ€å¤šå¯ä»¥è®¢é˜…çš„é¢‘é“å’Œæ¨¡å¼çš„æ•°é‡ã€‚é»˜è®¤å€¼æ˜¯5ã€‚
          - `subscriptionConnectionMinimumIdleSize`ï¼šè®¢é˜…è¿æ¥æ± æœ€å°ç©ºé—²è¿æ¥æ•°ï¼Œå³è®¢é˜…è¿æ¥æ± ä¸­æœ€å°‘ä¿æŒçš„ç©ºé—²è¿æ¥æ•°é‡ã€‚é»˜è®¤å€¼æ˜¯1ã€‚
          - `subscriptionConnectionPoolSize`ï¼šè®¢é˜…è¿æ¥æ± æœ€å¤§è¿æ¥æ•°ï¼Œå³è®¢é˜…è¿æ¥æ± ä¸­æœ€å¤šå¯ä»¥åˆ›å»ºçš„Redisè¿æ¥æ•°é‡ã€‚é»˜è®¤å€¼æ˜¯50ã€‚
      
          è¿™ä¸‰ä¸ªå‚æ•°éƒ½æ˜¯å…³äºRedisè®¢é˜…è¿æ¥æ± çš„è®¾ç½®ï¼Œä½†æ˜¯å®ƒä»¬ä¹‹é—´æœ‰ä¸€äº›å·®å¼‚ï¼š
      
          - `subscriptionsPerConnection`æ˜¯å…³äºRedisè¿æ¥è®¢é˜…æ•°é‡çš„è®¾ç½®ï¼Œå³æ¯ä¸ªRedisè¿æ¥æœ€å¤šå¯ä»¥è®¢é˜…çš„é¢‘é“å’Œæ¨¡å¼çš„æ•°é‡ã€‚
          - `subscriptionConnectionMinimumIdleSize`æ˜¯å…³äºè®¢é˜…è¿æ¥æ± ç©ºé—²è¿æ¥æ•°é‡çš„è®¾ç½®ï¼Œå³è®¢é˜…è¿æ¥æ± ä¸­æœ€å°‘ä¿æŒçš„ç©ºé—²è¿æ¥æ•°é‡ã€‚
          - `subscriptionConnectionPoolSize`æ˜¯å…³äºè®¢é˜…è¿æ¥æ± æœ€å¤§è¿æ¥æ•°é‡çš„è®¾ç½®ï¼Œå³è®¢é˜…è¿æ¥æ± ä¸­æœ€å¤šå¯ä»¥åˆ›å»ºçš„Redisè¿æ¥æ•°é‡ã€‚
      
          éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™ä¸‰ä¸ªå‚æ•°éƒ½æ˜¯å¯ä»¥æ ¹æ®å®é™…æƒ…å†µè¿›è¡Œè°ƒæ•´çš„ï¼Œä½†æ˜¯éœ€è¦æ ¹æ®å®é™…æƒ…å†µè¿›è¡Œåˆç†çš„è®¾ç½®ï¼Œä»¥ç¡®ä¿Redisè®¢é˜…è¿æ¥æ± çš„ç¨³å®šæ€§å’Œæ€§èƒ½ã€‚
      
      - æ¯ä¸ªè¿æ¥çš„è®¢é˜…æ•°é‡æŒ‡çš„æ˜¯ä»€ä¹ˆï¼Ÿè®¢é˜…è¿æ¥æ± æ˜¯ä»€ä¹ˆ
      
        - æ¯ä¸ªè¿æ¥çš„è®¢é˜…æ•°é‡æŒ‡çš„æ˜¯æ¯ä¸ªRedisè¿æ¥æœ€å¤šå¯ä»¥åŒæ—¶è®¢é˜…çš„é¢‘é“å’Œæ¨¡å¼çš„æ•°é‡ã€‚åœ¨Redisä¸­ï¼Œå®¢æˆ·ç«¯å¯ä»¥é€šè¿‡è®¢é˜…é¢‘é“å’Œæ¨¡å¼æ¥æ¥æ”¶RedisæœåŠ¡å™¨å‘é€çš„æ¶ˆæ¯ï¼Œè€Œæ¯ä¸ªRedisè¿æ¥éƒ½å¯ä»¥è®¢é˜…å¤šä¸ªé¢‘é“å’Œæ¨¡å¼ã€‚
      
          è®¢é˜…è¿æ¥æ± æ˜¯Redissonä¸­ç”¨äºç®¡ç†Redisè®¢é˜…è¿æ¥çš„è¿æ¥æ± ã€‚åœ¨Redissonä¸­ï¼Œä¸ºäº†æé«˜Redisè®¢é˜…çš„æ€§èƒ½å’Œå¯é æ€§ï¼Œé‡‡ç”¨äº†è¿æ¥æ± çš„æ–¹å¼æ¥ç®¡ç†Redisè®¢é˜…è¿æ¥ã€‚è®¢é˜…è¿æ¥æ± ä¸­ç»´æŠ¤äº†å¤šä¸ªRedisè¿æ¥ï¼Œä»¥ä¾¿åœ¨Redisè®¢é˜…æœŸé—´ä¿æŒè¿æ¥çš„å¯ç”¨æ€§ã€‚åœ¨Redissonä¸­ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œè®¢é˜…è¿æ¥æ± ä¸­æœ€å¤šå¯ä»¥åˆ›å»º50ä¸ªRedisè¿æ¥ï¼Œå…¶ä¸­æœ€å°‘ä¿æŒ1ä¸ªç©ºé—²è¿æ¥ã€‚åŒæ—¶ï¼Œæ¯ä¸ªRedisè¿æ¥æœ€å¤šå¯ä»¥è®¢é˜…5ä¸ªé¢‘é“å’Œæ¨¡å¼ã€‚è¿™äº›å‚æ•°éƒ½å¯ä»¥æ ¹æ®å®é™…æƒ…å†µè¿›è¡Œè°ƒæ•´ï¼Œä»¥æ»¡è¶³ä¸åŒåœºæ™¯ä¸‹çš„éœ€æ±‚ã€‚
      
      - redissoné…ç½®ä¸­slaveConnectionMinimumIdleSizeã€slaveConnectionPoolSizeã€masterConnectionMinimumIdleSizeã€masterConnectionPoolSizeåˆ†åˆ«è¡¨ç¤ºä»€ä¹ˆï¼Ÿ
      
        - åœ¨Redissonçš„é…ç½®ä¸­ï¼Œ`slaveConnectionMinimumIdleSize`ã€`slaveConnectionPoolSize`ã€`masterConnectionMinimumIdleSize`ã€`masterConnectionPoolSize`å››ä¸ªå‚æ•°åˆ†åˆ«è¡¨ç¤ºï¼š
      
          - `slaveConnectionMinimumIdleSize`ï¼šä»èŠ‚ç‚¹è¿æ¥æ± æœ€å°ç©ºé—²è¿æ¥æ•°ï¼Œå³ä»èŠ‚ç‚¹è¿æ¥æ± ä¸­æœ€å°‘ä¿æŒçš„ç©ºé—²è¿æ¥æ•°é‡ã€‚é»˜è®¤å€¼æ˜¯1ã€‚
          - `slaveConnectionPoolSize`ï¼šä»èŠ‚ç‚¹è¿æ¥æ± æœ€å¤§è¿æ¥æ•°ï¼Œå³ä»èŠ‚ç‚¹è¿æ¥æ± ä¸­æœ€å¤šå¯ä»¥åˆ›å»ºçš„Redisè¿æ¥æ•°é‡ã€‚é»˜è®¤å€¼æ˜¯64ã€‚
          - `masterConnectionMinimumIdleSize`ï¼šä¸»èŠ‚ç‚¹è¿æ¥æ± æœ€å°ç©ºé—²è¿æ¥æ•°ï¼Œå³ä¸»èŠ‚ç‚¹è¿æ¥æ± ä¸­æœ€å°‘ä¿æŒçš„ç©ºé—²è¿æ¥æ•°é‡ã€‚é»˜è®¤å€¼æ˜¯10ã€‚
          - `masterConnectionPoolSize`ï¼šä¸»èŠ‚ç‚¹è¿æ¥æ± æœ€å¤§è¿æ¥æ•°ï¼Œå³ä¸»èŠ‚ç‚¹è¿æ¥æ± ä¸­æœ€å¤šå¯ä»¥åˆ›å»ºçš„Redisè¿æ¥æ•°é‡ã€‚é»˜è®¤å€¼æ˜¯64ã€‚
      
          è¿™å››ä¸ªå‚æ•°éƒ½æ˜¯å…³äºRedisä¸»ä»å¤åˆ¶æ¨¡å¼ä¸‹ï¼ˆå“¨å…µæ¨¡å¼ï¼‰çš„è¿æ¥æ± è®¾ç½®ï¼Œä½†æ˜¯å®ƒä»¬ä¹‹é—´æœ‰ä¸€äº›å·®å¼‚ï¼š
      
          - `slaveConnectionMinimumIdleSize`å’Œ`slaveConnectionPoolSize`æ˜¯å…³äºä»èŠ‚ç‚¹è¿æ¥æ± çš„è®¾ç½®ï¼Œå³ä»èŠ‚ç‚¹è¿æ¥æ± ä¸­æœ€å°‘ä¿æŒçš„ç©ºé—²
      
      - redissoné…ç½®ä¸­readModeã€subscriptionModeã€scanIntervalã€pingConnectionIntervalåˆ†åˆ«è¡¨ç¤ºä»€ä¹ˆï¼Ÿ
      
        - åœ¨Redissonçš„é…ç½®ä¸­ï¼Œ`readMode`ã€`subscriptionMode`ã€`scanInterval`ã€`pingConnectionInterval`å››ä¸ªå‚æ•°åˆ†åˆ«è¡¨ç¤ºï¼š
      
          - `readMode`ï¼šRedissonè¯»å–æ¨¡å¼ï¼Œå³åœ¨è¯»å–æ•°æ®æ—¶é‡‡ç”¨çš„ç­–ç•¥ã€‚é»˜è®¤å€¼æ˜¯`SLAVE`ï¼Œè¡¨ç¤ºä¼˜å…ˆä»ä»èŠ‚ç‚¹è¯»å–æ•°æ®ï¼Œå¦‚æœä»èŠ‚ç‚¹ä¸å¯ç”¨ï¼Œåˆ™ä»ä¸»èŠ‚ç‚¹è¯»å–æ•°æ®ã€‚å¦å¤–è¿˜å¯ä»¥è®¾ç½®ä¸º`MASTER`ï¼Œè¡¨ç¤ºåªä»ä¸»èŠ‚ç‚¹è¯»å–æ•°æ®ã€‚
          - `subscriptionMode`ï¼šRedissonè®¢é˜…æ¨¡å¼ï¼Œå³åœ¨è®¢é˜…é¢‘é“å’Œæ¨¡å¼æ—¶é‡‡ç”¨çš„ç­–ç•¥ã€‚é»˜è®¤å€¼æ˜¯`SLAVE`ï¼Œè¡¨ç¤ºä¼˜å…ˆä»ä»èŠ‚ç‚¹è®¢é˜…é¢‘é“å’Œæ¨¡å¼ï¼Œå¦‚æœä»èŠ‚ç‚¹ä¸å¯ç”¨ï¼Œåˆ™ä»ä¸»èŠ‚ç‚¹è®¢é˜…é¢‘é“å’Œæ¨¡å¼ã€‚å¦å¤–è¿˜å¯ä»¥è®¾ç½®ä¸º`MASTER`ï¼Œè¡¨ç¤ºåªä»ä¸»èŠ‚ç‚¹è®¢é˜…é¢‘é“å’Œæ¨¡å¼ã€‚
          - `scanInterval`ï¼šRedissonæ‰«æé—´éš”æ—¶é—´ï¼Œå³Redissonå®šæœŸæ£€æŸ¥è¿æ¥æ± ä¸­è¿æ¥æ˜¯å¦å¯ç”¨çš„æ—¶é—´é—´éš”ã€‚é»˜è®¤å€¼æ˜¯1000æ¯«ç§’ï¼Œå³æ¯éš”1ç§’é’Ÿæ£€æŸ¥ä¸€æ¬¡è¿æ¥æ± ä¸­çš„è¿æ¥æ˜¯å¦å¯ç”¨ã€‚
          - `pingConnectionInterval`ï¼šRedissonå¿ƒè·³æ£€æµ‹é—´éš”æ—¶é—´ï¼Œå³Redissonå®šæœŸå‘é€PINGå‘½ä»¤æ£€æµ‹Redisè¿æ¥æ˜¯å¦å¯ç”¨çš„æ—¶é—´é—´éš”ã€‚é»˜è®¤å€¼æ˜¯0ï¼Œè¡¨ç¤ºä¸è¿›è¡Œå¿ƒè·³æ£€æµ‹ã€‚å¦‚æœè®¾ç½®äº†è¯¥å‚æ•°ï¼Œåˆ™è¡¨ç¤ºæ¯éš”ä¸€å®šæ—¶é—´ï¼ˆå•ä½æ˜¯æ¯«ç§’ï¼‰å‘é€ä¸€æ¬¡PINGå‘½ä»¤æ£€æµ‹Redisè¿æ¥æ˜¯å¦å¯ç”¨ã€‚
      
          è¿™å››ä¸ªå‚æ•°éƒ½æ˜¯å…³äºRedissonå®¢æˆ·ç«¯çš„ä¸€äº›é…ç½®ï¼Œç”¨äºæ§åˆ¶Redissonåœ¨è¿æ¥RedisæœåŠ¡å™¨æ—¶çš„ä¸€äº›è¡Œä¸ºã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™äº›å‚æ•°éƒ½æ˜¯å¯ä»¥æ ¹æ®å®é™…æƒ…å†µè¿›è¡Œè°ƒæ•´çš„ï¼Œä½†æ˜¯éœ€è¦æ ¹æ®å®é™…æƒ…å†µè¿›è¡Œåˆç†çš„è®¾ç½®ï¼Œä»¥ç¡®ä¿Redissonå®¢æˆ·ç«¯çš„ç¨³å®šæ€§å’Œæ€§èƒ½ã€‚
      
      - redissoné…ç½®ä¸­keepAliveã€tcpNoDelayåˆ†åˆ«è¡¨ç¤ºä»€ä¹ˆï¼Ÿ
      
        - åœ¨Redissonçš„é…ç½®ä¸­ï¼Œ`keepAlive`å’Œ`tcpNoDelay`ä¸¤ä¸ªå‚æ•°åˆ†åˆ«è¡¨ç¤ºï¼š
      
          - `keepAlive`ï¼šæ˜¯å¦å¼€å¯TCPè¿æ¥çš„SO_KEEPALIVEå±æ€§ã€‚å¦‚æœè®¾ç½®ä¸ºtrueï¼Œåˆ™è¡¨ç¤ºå¼€å¯TCPè¿æ¥çš„SO_KEEPALIVEå±æ€§ï¼Œå³åœ¨TCPè¿æ¥ç©ºé—²ä¸€æ®µæ—¶é—´åï¼Œä¼šè‡ªåŠ¨å‘å¯¹ç«¯å‘é€å¿ƒè·³åŒ…ä»¥ä¿æŒè¿æ¥çš„å¯ç”¨æ€§ã€‚é»˜è®¤å€¼æ˜¯falseï¼Œè¡¨ç¤ºä¸å¼€å¯TCPè¿æ¥çš„SO_KEEPALIVEå±æ€§ã€‚
          - `tcpNoDelay`ï¼šæ˜¯å¦å¼€å¯TCPè¿æ¥çš„TCP_NODELAYå±æ€§ã€‚å¦‚æœè®¾ç½®ä¸ºtrueï¼Œåˆ™è¡¨ç¤ºå¼€å¯TCPè¿æ¥çš„TCP_NODELAYå±æ€§ï¼Œå³ç¦ç”¨Nagleç®—æ³•ï¼Œå¯ä»¥æé«˜å°æ•°æ®åŒ…ä¼ è¾“çš„æ€§èƒ½ã€‚é»˜è®¤å€¼æ˜¯trueï¼Œè¡¨ç¤ºå¼€å¯TCPè¿æ¥çš„TCP_NODELAYå±æ€§ã€‚
      
          éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™ä¸¤ä¸ªå‚æ•°éƒ½æ˜¯å…³äºTCPè¿æ¥çš„ä¸€äº›é…ç½®ï¼Œç”¨äºæ§åˆ¶TCPè¿æ¥çš„è¡Œä¸ºã€‚éœ€è¦æ ¹æ®å®é™…æƒ…å†µè¿›è¡Œè®¾ç½®ï¼Œä»¥ç¡®ä¿TCPè¿æ¥çš„ç¨³å®šæ€§å’Œæ€§èƒ½ã€‚
      
      - redissoné…ç½®ä¸­threadsã€nettyThreadsã€codecã€transportModeåˆ†åˆ«è¡¨ç¤ºä»€ä¹ˆï¼Ÿ
      
        - åœ¨Redissonçš„é…ç½®ä¸­ï¼Œ`threads`ã€`nettyThreads`ã€`codec`ã€`transportMode`å››ä¸ªå‚æ•°åˆ†åˆ«è¡¨ç¤ºï¼š
      
          - `threads`ï¼šRedissonå®¢æˆ·ç«¯çš„å·¥ä½œçº¿ç¨‹æ•°é‡ã€‚é»˜è®¤å€¼æ˜¯å½“å‰CPUæ ¸å¿ƒæ•°*2ã€‚
          - `nettyThreads`ï¼šRedissonå®¢æˆ·ç«¯Nettyçš„å·¥ä½œçº¿ç¨‹æ•°é‡ã€‚é»˜è®¤å€¼æ˜¯å½“å‰CPUæ ¸å¿ƒæ•°*2ã€‚
          - `codec`ï¼šRedissonå®¢æˆ·ç«¯çš„ç¼–è§£ç å™¨ç±»å‹ã€‚é»˜è®¤å€¼æ˜¯`org.redisson.codec.JsonJacksonCodec`ï¼Œè¡¨ç¤ºä½¿ç”¨JSONæ ¼å¼è¿›è¡Œç¼–è§£ç ã€‚å¦å¤–è¿˜å¯ä»¥è®¾ç½®ä¸º`org.redisson.codec.SerializationCodec`ï¼Œè¡¨ç¤ºä½¿ç”¨Javaåºåˆ—åŒ–è¿›è¡Œç¼–è§£ç ã€‚
          - `transportMode`ï¼šRedissonå®¢æˆ·ç«¯çš„ä¼ è¾“æ¨¡å¼ã€‚é»˜è®¤å€¼æ˜¯`NIO`ï¼Œè¡¨ç¤ºä½¿ç”¨Java NIOè¿›è¡Œç½‘ç»œä¼ è¾“ã€‚å¦å¤–è¿˜å¯ä»¥è®¾ç½®ä¸º`EPOLL`ï¼Œè¡¨ç¤ºä½¿ç”¨Linux EPOLLè¿›è¡Œç½‘ç»œä¼ è¾“ã€‚
      
          éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™å››ä¸ªå‚æ•°éƒ½æ˜¯å…³äºRedissonå®¢æˆ·ç«¯çš„ä¸€äº›é…ç½®ï¼Œç”¨äºæ§åˆ¶Redissonå®¢æˆ·ç«¯çš„è¡Œä¸ºã€‚éœ€è¦æ ¹æ®å®é™…æƒ…å†µè¿›è¡Œè®¾ç½®ï¼Œä»¥ç¡®ä¿Redissonå®¢æˆ·ç«¯çš„ç¨³å®šæ€§å’Œæ€§èƒ½ã€‚
      
      - org.redisson.codec.Kryo5Codecæ˜¯ä»€ä¹ˆï¼Ÿ
      
        - `org.redisson.codec.Kryo5Codec`æ˜¯Redissonæä¾›çš„ä¸€ç§ç¼–è§£ç å™¨ç±»å‹ï¼Œç”¨äºåœ¨Redissonå®¢æˆ·ç«¯å’ŒRedisæœåŠ¡å™¨ä¹‹é—´è¿›è¡Œæ•°æ®çš„åºåˆ—åŒ–å’Œååºåˆ—åŒ–ã€‚å®ƒä½¿ç”¨Kryo 5.xç‰ˆæœ¬è¿›è¡Œå¯¹è±¡çš„åºåˆ—åŒ–å’Œååºåˆ—åŒ–ï¼Œç›¸æ¯”äºJavaé»˜è®¤çš„åºåˆ—åŒ–æ–¹å¼ï¼ŒKryoåºåˆ—åŒ–æ›´åŠ é«˜æ•ˆï¼Œåºåˆ—åŒ–åçš„æ•°æ®æ›´åŠ ç´§å‡‘ï¼Œå¯ä»¥å‡å°‘ç½‘ç»œä¼ è¾“çš„æ•°æ®é‡å’Œä¼ è¾“æ—¶é—´ï¼Œä»è€Œæé«˜Redissonå®¢æˆ·ç«¯çš„æ€§èƒ½ã€‚
      
      - *End.*



