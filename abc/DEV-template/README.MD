#### åç«¯å¼€å‘è§„èŒƒ

æ—¶é—´ï¼š2023å¹´05æœˆ04æ—¥ 18:51:29

---

#### ä¸€ã€æ§åˆ¶å™¨ï¼ˆControllerï¼‰

1.1 å…¥å‚

> æˆ‘ä»¬çº¦å®šå…¥å‚ä»¥`AaaReq`å‘½åï¼›
>
> Controllerå±‚æ–¹æ³•æ¥æ”¶çš„å‚æ•°`A`å’ŒServiceå±‚æ–¹æ³•æ¥æ”¶çš„å‚æ•°`B`æœ‰éƒ¨åˆ†å·®å¼‚ï¼Œå‰è€…`A`å°†ç›´æ¥å¤„ç†è§†å›¾ä¼ å…¥çš„æ•°æ®ï¼Œåè€…`B`å‚æ•°æ˜¯ä¸šåŠ¡å¿…é¡»å‚æ•°ï¼ˆä¸éœ€è¦åŒ…å«`A`ä¸­æ‰€æœ‰æ•°æ®ï¼‰
>
> - ç³»ç»Ÿä¾§å°†æä¾›`AbstractRequest`ï¼Œå†…éƒ¨å°è£…äº†è‡ªå®šä¹‰çš„`PageInfo`ï¼ŒControllerå±‚å¯åœ¨`AbstractRequest`åŸºç¡€ä¸Šæ´¾ç”Ÿ`AbstractBaseRequest`ï¼Œå…·ä½“çš„è¯·æ±‚ä½“ç»§æ‰¿è‡ªæ´¾ç”Ÿå‡ºçš„æŠ½è±¡ç±»ï¼ˆServiceå±‚å…¥å‚åˆ™ç›´æ¥ç»§æ‰¿`AbstractRequest`ï¼‰

1.2 å“åº”

> æˆ‘ä¹ˆçº¦å®šControllerå±‚è¿”å›ç±»å‹ç»Ÿä¸€å°è£…ä¸º`ResponseData`
>
> - success:Boolean
> - code:int
>   - message:String
> - T:result
> - timestamp:longï¼ˆé»˜è®¤å¡«å……ï¼‰
>
> å½“ç„¶ï¼Œä¼šæä¾›ä¸€ä¸ªå·¥å…·ç±»`ResponseProcessor`ï¼Œç”¨äºå¿«é€Ÿå¾—åˆ°æ ¼å¼æ­£ç¡®å’Œé”™è¯¯çš„`ResponseData`

1.3 Controllerä¸­é€»è¾‘æ¨¡æ¿

> ç¬¬ä¸€æ­¥ï¼šè§£æ`AaaReq`ï¼Œå°†é€‚åˆçš„æ•°æ®å¡«å……åˆ°Serviceå±‚çš„å‚æ•°`AaaRequest`ä¸­ï¼›
>
> ç¬¬äºŒæ­¥ï¼šè°ƒç”¨æœåŠ¡ï¼›
>
> ç¬¬ä¸‰æ­¥ï¼šå¤„ç†ç»“æœ
>
> - æƒ…å†µä¸€ï¼šæ­£å¸¸å¾—åˆ°å“åº”
>
>   - ```java
>     // æŸ¥è¯¢ï¼ˆåç«¯å…¨éƒ¨åˆ†é¡µï¼Œåˆ†é¡µå‚æ•°ç”±å‰ç«¯æ§åˆ¶ï¼Œä¸æƒ³è¦åˆ†é¡µæ—¶ï¼Œå‰ç«¯æ”¾å¤§åˆ†é¡µå‚æ•°å³å¯ï¼‰
>     PageResponse pageResponse = new PagerResponse(åˆ—è¡¨, total);
>     new ResponseData<PageResponse<åˆ—è¡¨æ³›å‹>>().setData(pageResponse, response.getMsg())
>     ```
>
>   - ```java
>     // æ•°æ®å›å¡«ï¼ˆé€‚ç”¨äºæ–°å¢ï¼‰
>     new ResponseData<åˆ—è¡¨æ³›å‹>().setData(åˆ—è¡¨, response.getMsg())
>     ```
>
>   - ```java
>     // æ›´æ–°ã€åˆ é™¤ã€å¯åœ
>     new ResponseData<>().setData(null, response.getMsg())
>     ```
>
> - æƒ…å†µäºŒï¼šæ•è·åˆ°BizException
>
>   - ```java
>     new ResponseData<>().setErrorMessage(be.getErrorCode, be.getMessage);
>     ```
>
> - æƒ…å†µä¸‰ï¼šæ•è·åˆ°æœªçŸ¥Exception
>
>   - ```java
>     new ResponseData<>()
>     .setErrorMessage(SystemReturnCodeConstants.SYSTEM_ERROR.getCode(),SystemReturnCodeConstants.SYSTEM_ERROR.getMessage());
>     ```





#### äºŒã€Serviceï¼ˆæœåŠ¡å±‚ï¼‰

2.1 å…¥å‚

> å’ŒControllerå±‚å…¥å‚ç±»ä¼¼ï¼Œæˆ‘ä»¬çº¦å®šå°†Serviceå±‚çš„å…¥å‚å°è£…ä¸º`AaaRequest â†’ AbstractRequest`
>
> - AaaVO
> - List< AaaVo >
> - â†’ PageInfo
>
> `AaaRequest`ä¸­éœ€è¦æä¾›Serviceå®ç°çš„å‚æ•°æ ¡éªŒæ–¹æ³•ã€‚

2.2 å“åº”

> æˆ‘ä»¬çº¦å®šå“åº”åˆ†ä¸ºä¸¤ç§ï¼Œ<u>äºŒè€…å‡ç»§æ‰¿äº`AbstractResponse(code:String, msg:String)ğŸ””`</u>
>
> - BaseResponse< T >
>   - T result
>   - long total
> - DefaultResponse
>   - ç©º

2.3 Serviceä¸­é€»è¾‘æ¨¡æ¿

> 2.3.1 ä¸‰ä¸ªåœ°æ–¹æ ‡è®°æ—¥å¿—é”šç‚¹ï¼ˆå¼€å§‹ã€ç»“æŸä¸å¼‚å¸¸ï¼‰
>
> 2.3.2 å‚æ•°æ ¡éªŒï¼ˆ`AaaRequest`ï¼‰
>
> 2.3.3 å®šä¹‰åˆå§‹åŒ–å“åº”ä½“responseã€total
>
> 2.3.4 ä»requestä¸­è§£æå‚æ•°
>
> 2.3.5 ã€ä¸šåŠ¡å¤„ç†ã€‘â† éœ€è¦æ•è·ä¸¤ç§å¼‚å¸¸ï¼ˆ`BizException`å’Œ`Exception`ï¼‰
>
> 2.3.6 å¡«å……å“åº”ä½“
>
> - total
> - result
> - code
> - msg





















